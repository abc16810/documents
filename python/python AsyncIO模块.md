asyncio模块用于异步输入/输出。

它主要提供了一种使用async/await语法创建和运行协程的方法

协程是一种编程模式，它将例程(例如子程序、函数或代码块)一般化以允许它们被挂起和恢复。协程使用协作多任务，要求执行线程显式地让出控制

协程异步任务可以通过在函数定义之前添加" async "关键字来定义;例如:

```
async def work():
    # do things...
```

这个语法定义了一个可等待的(awaitable)，它是一个可等待的执行单元

程序可以使用关键字await等待一个可等待的异步任务完成;例如:

```
# 创建和调度协程，并等待它返回，  
await work()
```

- 创建一个协程并安排它执行
- 执行直至协程返回。

我们还可以通过调用create_task()函数来创建和调度执行的协程，该函数将返回一个Task对象。

```
task = create_task(work())
```

这个Task对象提供了一个已调度协程的句柄，允许查询任务的状态，添加一个已完成的回调，以及取消任务

我们也可以直接等待一个任务对象;例如

```
# 等待任务完成
await task
```

async/await语法仅在创建事件循环的asyncio运行时下受支持，允许执行线程异步执行任务并阻塞。

这是通过使用入口点异步函数的asyncio.run()函数实现的;例如

```
# 启动asyncio运行时
asyncio.run(work())
```

这将创建支持协程调度和执行所需的事件循环运行时。

本文将简要介绍在Python中创建和执行协程的过程，不过asyncio模块更大，并提供了一套更广泛的工具，用于创建和管理专注于io任务的协程

#### 并发执行

AsyncIO中的任务可以使用await关键字进行调度，并将由事件循环尽快执行，AsyncIO不能并行执行代码，尽管看起来可能就是这样

AsyncIO在单个线程中执行协程，而单个Python线程将在单个CPU核上执行

Python通常使用async/await关键字来支持异步编程，但AsyncIO模块特别关注IO任务，例如从文件和网络套接字等流进行读写

AsyncIO框架使用协程。它们是在单个操作系统级线程中执行的软件或python级编程模式，协程是由Python作为软件模式管理的，不受与系统线程相同的约束，因此协程的数量可能没有一个合理的限制。单个事件循环可以支持数千、数万甚至数十万个协程。

一个协程必须等待另一个协程的结果，这显式地产生执行和控制另一个任务的线程

对于不熟悉和缺乏经验的开发人员来说，这可能会使代码更难阅读和维护。对于通常是多线程的代码来说，这可能是一个相当大的支持负担，但与使用线程池的代码相比就不那么容易了。